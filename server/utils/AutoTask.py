import asyncio
from collections import Counter
from utils.AioProxyAccessor import aoiAccessor
from utils.tools import logger, printTrackableException


async def wait_for_bool(fut, timeout):
    try:
        await asyncio.wait_for(fut, timeout=timeout)
        return True
    except Exception as e:
        return False


class autoTask():
    def __init__(self, loop: asyncio.AbstractEventLoop, aioPa: aoiAccessor) -> None:
        self.stopSignal = asyncio.Event()
        self.loop = loop
        self.aioPa = aioPa

    async def autoContinueDownload(self, ttw = 60 * 5):
        while not await wait_for_bool(self.stopSignal.wait(), timeout=ttw):
            try:
                count = await self.aioPa.continueDownload()
                if count != 0:
                    logger.info(f"继续{count}项下载")
            except Exception as e:
                printTrackableException(e)

    def getFilter(self):
        # artistList = []

        # for x in self.aioPa.db.g_data.db.all():
        #     # 这里 可以使外来的
        #     for y in x["tags"]:
        #         if y[:7] == "artist:":
        #             artistList.append(y)
        # artistListCount = Counter(artistList)
        # filteredArtistList = set(
        #     [element for element, count in artistListCount.items() if count >= 3])
        filteredArtistList = {'artist:alba', 'artist:gosaiji', 'artist:summer', 'artist:ame', 'artist:arumamai ayuka plus', 'artist:ponpon', 'artist:spiritus tarou', 'artist:yan-yam', 'artist:kurosu gatari', 'artist:p senpuki', 'artist:uzukinoko', 'artist:fumituki', 'artist:kylin', 'artist:leonat', 'artist:agobitch nee-san', 'artist:torichamaru', 'artist:satou kuuki', 'artist:kishiri toworu', 'artist:shiratama', 'artist:ricky', 'artist:unacchi', 'artist:ootsuka mahiro', 'artist:iapoc', 'artist:crow', 'artist:ogadenmon', 'artist:as109', 'artist:deco', 'artist:rkrk12', 'artist:focke wolf', 'artist:okayusan', 'artist:henkuma', 'artist:haregama shiina', 'artist:wagashi', 'artist:amamitsuki', 'artist:namatsui', 'artist:maitake', 'artist:mel', 'artist:delta chimaki', 'artist:ohtomo takuji', 'artist:tamarun', 'artist:akiduki tsukasa', 'artist:abi', 'artist:fumi miyabi', 'artist:mitsuki', 'artist:miyako no gohan', 'artist:kozou', 'artist:nakamura kuzuyu', 'artist:konka', 'artist:shiokonbu', 'artist:mame denkyuu', 'artist:kuon', 'artist:nagasode', 'artist:benimura karu', 'artist:kurowa', 'artist:nekomugi', 'artist:hisona', 'artist:kanroame', 'artist:kagami uekusa', 'artist:kibii mocha', 'artist:akae shirou', 'artist:nekomura', 'artist:youta', 'artist:kekemotsu', 'artist:kuune rin', 'artist:yukiusagi.', 'artist:hinata mutsuki', 'artist:kure', 'artist:osomatsu', 'artist:yano mitsuki', 'artist:fukumoto masahisa', 'artist:ayamy', 'artist:bangetsu setsuka', 'artist:fujiyama', 'artist:okyou', 'artist:mafuyu hemp', 'artist:lazu', 'artist:tomohiro kai', 'artist:hamao', 'artist:yuasa', 'artist:mm', 'artist:mountainhan', 'artist:annie', 'artist:yano takumi', 'artist:mojyako', 'artist:ryoattoryo', 'artist:marugoshi', 'artist:mogg', 'artist:lin', 'artist:takeda hiromitsu', 'artist:shijima', 'artist:putama', 'artist:haku89', 'artist:sevengar', 'artist:sansyoku amido.', 'artist:fuguta-ke', 'artist:mayonaka taroupho', 'artist:komagata', 'artist:zucchini', 'artist:lamb', 'artist:shirota dai', 'artist:aoin', 'artist:pikazo', 'artist:borusiti', 'artist:nicolai no yome', 'artist:mochi', 'artist:homunculus', 'artist:fukuyama naoto', 'artist:chiyami', 'artist:karasu chan', 'artist:umakuchi syouyu', 'artist:noyama', 'artist:getsuyou yasumi.', 'artist:namamo nanase', 'artist:ocha', 'artist:pija', 'artist:irua', 'artist:sanom', 'artist:akausu ko', 'artist:iwasaki takashi', 'artist:syoukaki', 'artist:awayume', 'artist:mammoth', 'artist:neko toufu', 'artist:nokishita negio', 'artist:guts shihan', 'artist:tsurusaki takahiro', 'artist:testa', 'artist:orinze', 'artist:konnyaku', 'artist:zekkyosyu', 'artist:mikoma sanagi', 'artist:taji', 'artist:mil', 'artist:butachang', 'artist:batsu', 'artist:yuki', 'artist:uko', 'artist:tabuchi', 'artist:haritama hiroki', 'artist:suruga kuroitsu', 'artist:chado', 'artist:hanafuda sakurano', 'artist:mizuyuki', 'artist:oriue wato', 'artist:itohana', 'artist:inonaka kawazu', 'artist:ouma tokiichi', 'artist:akai same', 'artist:z-ton', 'artist:diisuke', 'artist:rabu', 'artist:karasuma yayoi', 'artist:mimonel', 'artist:35 machi', 'artist:pyon-kti', 'artist:yuzuto sen', 'artist:momoko', 'artist:poriuretan', 'artist:sky', 'artist:mdo-h', 'artist:tulip', 'artist:erocchi', 'artist:minamoto', 'artist:sena youtarou', 'artist:nekone', 'artist:esuke', 'artist:umeda nautilus', 'artist:meisuke', 'artist:han', 'artist:flugel', 'artist:kinntarou', 'artist:horonamin', 'artist:mikawaya', 'artist:sakagaki', 'artist:mei', 'artist:kinokomushi', 'artist:motomiya mitsuki', 'artist:saitom', 'artist:tiger', 'artist:mikanuji', 'artist:midori', 'artist:yuzuha', 'artist:yasu', 'artist:purapa', 'artist:ippongui', 'artist:murasaki shingou', 'artist:inanaki shiki', 'artist:shio', 'artist:ohkami ryosuke', 'artist:hirari', 'artist:komezawa', 'artist:suzutsuki kurara', 'artist:andoryu', 'artist:ooyun', 'artist:hinoshita akame', 'artist:nanao', 'artist:mikage', 'artist:ijima yuu', 'artist:ootsuka kotora', 'artist:wise speak', 'artist:rakisuto', 'artist:nanpuu', 'artist:rasahan', 'artist:seiichi', 'artist:yomoyama takashi', 'artist:takashina asahi', 'artist:kyougoku shin', 'artist:naenae', 'artist:mizusane', 'artist:arato asato', 'artist:kurebayashi asami', 'artist:tawara hiryuu', 'artist:kisaki', 'artist:ayuya', 'artist:tamatanuki', 'artist:watanon', 'artist:nicoby', 'artist:shimazu tekko', 'artist:erect sawaru', 'artist:yuki no arashi', 'artist:sakuraba yuuki', 'artist:kindatsu', 'artist:blacksaw', 'artist:menyoujan', 'artist:oshima aki', 'artist:sharekoube', 'artist:waka mochi ta', 'artist:senji', 'artist:mizuryu kei', 'artist:rifuru', 'artist:gar', 'artist:suto', 'artist:yoikorogashi', 'artist:saeki tatsuya', 'artist:tanuma', 'artist:eshimoto', 'artist:ponsuke', 'artist:shiwasu no okina', 'artist:hinotsuki neko', 'artist:bunapi 397 yen', 'artist:mirin', 'artist:eno yukimi', 'artist:maruchang', 'artist:nanae', 'artist:nathaniel pennel', 'artist:croriin', 'artist:caburi', 'artist:tam-u', 'artist:kazuma muramasa', 'artist:shimahara', 'artist:sian', 'artist:kokekokko coma', 'artist:isya', 'artist:nyoro nyorozou', 'artist:ryohka', 'artist:renji', 'artist:ken-1', 'artist:yoshio ereki', 'artist:saluky', 'artist:rororogi mogera', 'artist:ninoko', 'artist:napata', 'artist:shirai samoedo', 'artist:nigiri usagi', 'artist:tamagoro', 'artist:hankotsu max', 'artist:poccora', 'artist:sakai', 'artist:maruta', 'artist:oouso', 'artist:meido sushi', 'artist:ichihaya', 'artist:mira', 'artist:petenshi', 'artist:tamazatou', 'artist:minami', 'artist:panbai', 'artist:eruu', 'artist:kumada', 'artist:kiichi', 'artist:amane ruri', 'artist:f4u', 'artist:shiina', 'artist:duokuma', 'artist:jorori', 'artist:kanzume', 'artist:shiina shinya', 'artist:noripachi', 'artist:haruyukiko', 'artist:yuuki hagure', 'artist:azukiko', 'artist:kakuninii', 'artist:namaniku atk', 'artist:blvefo9', 'artist:nadeneko ponia', 'artist:himiya zyo-zu', 'artist:neko no youchuu', 'artist:healthyman', 'artist:kuroiwa madoka', 'artist:muteki soda', 'artist:nikubou maranoshin', 'artist:kizuki aruchu', 'artist:tomokichi', 'artist:yaruku', 'artist:plum', 'artist:yumeno owari', 'artist:nanashiki fuka', 'artist:shiruka bakaudon', 'artist:92m', 'artist:gustav', 'artist:fumihiro', 'artist:jairou', 'artist:hemachi', 'artist:shayo', 'artist:oota yuuichi', 'artist:shiden', 'artist:eliskalti', 'artist:iketatsu shizuru', 'artist:asakai mocchinu', 'artist:hitotsuba', 'artist:kereno', 'artist:eitarou', 'artist:shinama', 'artist:zen', 'artist:uba yoshiyuki', 'artist:nakasone haiji', 'artist:laomeng', 'artist:sinobiin', 'artist:miyabe kiwi', 'artist:sumiya', 'artist:ginhaha', 'artist:mochimako', 'artist:kasei', 'artist:gon', 'artist:nanno koto', 'artist:blade', 'artist:kaede', 'artist:nagashiro rouge', 'artist:son yohsyu', 'artist:yukiu con', 'artist:iida toyoyuki', 'artist:siina yuuki', 'artist:amanagi seiji', 'artist:shiraishinsuke', 'artist:haru', 'artist:muramurabito', 'artist:tetsujin', 'artist:ameno shigure', 'artist:akahito', 'artist:gentsuki', 'artist:hiten', 'artist:kanzarin', 'artist:chiune', 'artist:hardboiled yoshiko', 'artist:hijiri tsukasa', 'artist:shinokawa arumi', 'artist:kusayarou', 'artist:sasamori tomoe', 'artist:akashi rokuro', 'artist:oyari ashito', 'artist:rubi-sama', 'artist:tes-mel', 'artist:yamoge', 'artist:chacharan', 'artist:hagi', 'artist:oyaji', 'artist:karory', 'artist:arito arayuru', 'artist:zonda', 'artist:saki chisuzu', 'artist:santa', 'artist:hiiragi hajime', 'artist:saikawa yusa', 'artist:henrybird', 'artist:frunbell', 'artist:kiduki sai', 'artist:ma-kurou', 'artist:jino', 'artist:amano chiharu', 'artist:saikirider', 'artist:amamiya mizuki', 'artist:nori gorou', 'artist:hissatsukun', 'artist:momonosuke', 'artist:kon-kit', 'artist:soramame-san', 'artist:adumi kazuki', 'artist:kosuke haruhito', 'artist:alp', 'artist:natsume eri', 'artist:azumi kyohei', 'artist:jingrock', 'artist:atage', 'artist:sadamoto yoshiyuki', 'artist:mon-petit', 'artist:ae', 'artist:aree', 'artist:white bank', 'artist:hinahara emi', 'artist:tama', 'artist:nigesapo', 'artist:torisan', 'artist:tukinowagamo', 'artist:nakani', 'artist:harino646', 'artist:endou okito', 'artist:kurokawa izumi', 'artist:nekosaki aoi', 'artist:yuzuki n dash', 'artist:kenji', 'artist:suihei sen', 'artist:muneshiro', 'artist:midorinocha', 'artist:yuzuno kiichi', 'artist:yoshiki', 'artist:sesena yau', 'artist:ohno kanae', 'artist:tachibana yuu', 'artist:watanore', 'artist:tomose shunsaku', 'artist:taira tsukune', 'artist:puyocha', 'artist:ouji hiyoko', 'artist:kazamitiu', 'artist:mo', 'artist:tetsuna', 'artist:haguhagu', 'artist:momo', 'artist:ajishio', 'artist:gogopanda', 'artist:mori kouichirou', 'artist:syuuen', 'artist:suzuki nago', 'artist:shiratama yomogi', 'artist:kakino nashiko', 'artist:shika yuno', 'artist:sawayaka samehada', 'artist:jp06', 'artist:itou seto', 'artist:yodare', 'artist:toranoe', 'artist:fujishima sei1go', 'artist:emily', 'artist:tachibana roku', 'artist:dan', 'artist:xin', 'artist:sakuma tsukasa', 'artist:hadacra', 'artist:reco', 'artist:morikoke', 'artist:shibi', 'artist:karin', 'artist:hino', 'artist:roshin', 'artist:shiki takuto', 'artist:homina mia', 'artist:naruse hirofumi', 'artist:mana', 'artist:minasuki popuri', 'artist:minami star', 'artist:g-wara', 'artist:ueda yuu', 'artist:kaidou j1', 'artist:144', 'artist:asahina hikage', 'artist:mignon', 'artist:tsukako', 'artist:otsumami', 'artist:dramus', 'artist:karakuchi choucream', 'artist:simon', 'artist:nagata maria', 'artist:hanao.', 'artist:waterring', 'artist:kurun', 'artist:edogawa roman', 'artist:oryou', 'artist:tarao', 'artist:kiasa', 'artist:hyocorou', 'artist:ganmarei', 'artist:yopparai oni', 'artist:hiroya', 'artist:7x2', 'artist:muku', 'artist:dam', 'artist:usubeni sakurako', 'artist:iwami yasoya', 'artist:nijou katame', 'artist:usuki', 'artist:himukai kyousuke', 'artist:sirokuma', 'artist:hirame', 'artist:toujou tsukushi', 'artist:ryo', 'artist:kizaki', 'artist:soramoti', 'artist:nanaca mai', 'artist:miyashiro sousuke', 'artist:shisyo', 'artist:fushoku', 'artist:ulrich', 'artist:happoubi jin', 'artist:hisama kumako', 'artist:tatsu tairagi', 'artist:abe inori', 'artist:kyockcho', 'artist:takitarou', 'artist:akiduki akina', 'artist:kokihanada', 'artist:shikitani asuka', 'artist:shiki', 'artist:negahami', 'artist:kuroha nue', 'artist:arekusa mahone', 'artist:kaguyuzu', 'artist:nemigi tsukasa', 'artist:art jam', 'artist:23', 'artist:mibu natsuki', 'artist:ayakawa riku', 'artist:aka seiryuu', 'artist:yakitomato', 'artist:nyoriko', 'artist:nomu', 'artist:mashiro shirako', 'artist:shijokko', 'artist:takahashi hirona', 'artist:milk jam', 'artist:oxideengine', 'artist:yakumi benishouga', 'artist:syou', 'artist:nemu', 'artist:apoidea', 'artist:sasakuma kyouta', 'artist:riichu', 'artist:himuro shunsuke', 'artist:yuunagi show', 'artist:shirisensha', 'artist:borscht', 'artist:shiba nanasei', 'artist:nakamura regura', 'artist:kaduchi', 'artist:takemasa takeshi', 'artist:naruko hanaharu', 'artist:ronna', 'artist:haguruma', 'artist:pizanuko', 'artist:kamita', 'artist:yosai', 'artist:neisan', 'artist:senoo hibiteru', 'artist:crew', 'artist:kazakura', 'artist:ishimari yuuya', 'artist:murlachrot', 'artist:jovejun.', 'artist:akitsuki karasu', 'artist:barlun', 'artist:morimiya masayuki', 'artist:tefun', 'artist:yanagi yuu', 'artist:pettanp', 'artist:takano tomohiro', 'artist:suppa', 'artist:inuzumi masaki', 'artist:ichiyo moka', 'artist:shiomaneki', 'artist:neneru', 'artist:twinbox', 'artist:hoshi to lucky', 'artist:konomi', 'artist:echigoya takeru', 'artist:saru', 'artist:otabe sakura', 'artist:richard bahman', 'artist:horosuke', 'artist:saeki hokuto', 'artist:yuzuna hiyo', 'artist:kakei kei', 'artist:hoshi', 'artist:himitsu', 'artist:arai kazuki', 'artist:kazuwo daisuke', 'artist:tousen', 'artist:ribyuhki', 'artist:kamisiro ryu', 'artist:misaka12003', 'artist:hisakawa tinn', 'artist:kazutaro', 'artist:suzunone rena', 'artist:shiragiku', 'artist:tsugumi suzuma', 'artist:nylon', 'artist:maeshima ryou', 'artist:bekotarou', 'artist:takoyaki rock', 'artist:ponkotsu works', 'artist:ameto yuki', 'artist:ono misao', 'artist:kuromotokun', 'artist:doku denpa', 'artist:tamakake', 'artist:mushihara', 'artist:kyaradain', 'artist:harenochiame', 'artist:sakura yukimi', 'artist:ie', 'artist:laliberte', 'artist:senbei', 'artist:piyodera mucha', 'artist:makuro', 'artist:osaki', 'artist:matsuriuta', 'artist:sakamata nerimono', 'artist:kiyotaro', 'artist:osato', 'artist:cyocyo', 'artist:hyouta', 'artist:sakongawa koumyaku', 'artist:hakomaru', 'artist:ayuma sayu', 'artist:aramaki echizen', 'artist:chomoran', 'artist:mk', 'artist:uousaoh', 'artist:nikusoukyuu', 'artist:us them', 'artist:higashide irodori', 'artist:mitsumaro', 'artist:zan', 'artist:mogelano', 'artist:johnny', 'artist:mojarin', 'artist:nekometaru', 'artist:koza', 'artist:tsukimiya tsutome', 'artist:date', 'artist:hirano kawajuu', 'artist:inato serere', 'artist:darkmaya', 'artist:takara akihito', 'artist:giuniu', 'artist:pistonring nishizawa', 'artist:mr.a', 'artist:nawakena', 'artist:ippon', 'artist:momoduki suzu', 'artist:kirin kakeru', 'artist:thomas', 'artist:prime', 'artist:memeno kei', 'artist:sen', 'artist:ayano naoto', 'artist:fumio', 'artist:kanabun', 'artist:zhen lu', 'artist:miyano kintarou', 'artist:mataro', 'artist:hyouga.', 'artist:kurosawa kiyotaka', 'artist:pd', 'artist:mokki', 'artist:sisei', 'artist:mt', 'artist:noji', 'artist:takei ooki', 'artist:flanvia', 'artist:moketa', 'artist:wulazula', 'artist:wabara hiro', 'artist:masaki', 'artist:hisasi', 'artist:saryuu', 'artist:shaa', 'artist:taniguchi-san', 'artist:mimamui', 'artist:kirero', 'artist:xe', 'artist:remora', 'artist:ohisashiburi', 'artist:idaten funisuke', 'artist:hinasaki yo', 'artist:aya', 'artist:suzusimo', 'artist:kusaka souji', 'artist:sugaishi', 'artist:itami', 'artist:usagi nagomu', 'artist:syamonabe', 'artist:ichinomiya', 'artist:kapa', 'artist:titiduki', 'artist:ao banana', 'artist:fummy', 'artist:serizawa katsumi', 'artist:cait', 'artist:tamachi yuki', 'artist:niki', 'artist:ssa', 'artist:nekotewi', 'artist:nishi yoshiyuki', 'artist:oniben katze', 'artist:kangoku meika', 'artist:rei', 'artist:fu-ta', 'artist:oninarasu', 'artist:kakao', 'artist:yoshiragi', 'artist:tsuruyama mito', 'artist:ringo sui', 'artist:yokoyama naoki', 'artist:shirosuzu', 'artist:tarazoo', 'artist:sakuraba hikaru', 'artist:yamaimo tororo', 'artist:komiya yuuta', 'artist:ruschuto', 'artist:lolicept', 'artist:akino sora', 'artist:corundum', 'artist:kizuki rei', 'artist:ash yokoshima', 'artist:tirotata', 'artist:bota mochito', 'artist:ema', 'artist:soramuko', 'artist:kikunosukemaru', 'artist:kamizuki shiki', 'artist:achumuchi', 'artist:ishigami kazui', 'artist:hiyoko', 'artist:sayori', 'artist:kitaku', 'artist:abi kamesennin', 'artist:katsurai yoshiaki', 'artist:takatuki nato', 'artist:kisaragi miyu', 'artist:roga', 'artist:hara', 'artist:komi zumiko', 'artist:akizora momidi', 'artist:shake', 'artist:kayama rim', 'artist:kaduki', 'artist:hakui ami', 'artist:ke-ta', 'artist:pei', 'artist:oohira sunset', 'artist:okinaga umanosuke', 'artist:koikawa minoru', 'artist:kouri', 'artist:sakurayu hal', 'artist:shimaji', 'artist:kito sakeru', 'artist:yasson yoshiyuki', 'artist:koruri', 'artist:sha', 'artist:coupe', 'artist:midorino tanuki', 'artist:miwa yoshikazu', 'artist:shingo.', 'artist:negresco', 'artist:ouchi kaeru', 'artist:sajipen', 'artist:hamaken.', 'artist:mgmee', 'artist:komowata haruka', 'artist:hayashi', 'artist:sorai shinya', 'artist:minase kuru', 'artist:yuuzu tsushiro', 'artist:kiya shii', 'artist:tobimura', 'artist:shinya', 'artist:kitoen', 'artist:niro', 'artist:komota', 'artist:cowbow', 'artist:reizei', 'artist:opanchu', 'artist:try', 'artist:kasumi', 'artist:mikaduchi', 'artist:great mosu', 'artist:suimya', 'artist:enokido', 'artist:mori sinrisk', 'artist:unosero', 'artist:mirei', 'artist:miyama', 'artist:karoti', 'artist:higata akatsuki', 'artist:kagawa tomonobu', 'artist:heiqing langjun', 'artist:madoka tsukumo', 'artist:katase minami', 'artist:nagareboshi purin', 'artist:nagihashi coko', 'artist:lengsediaokafei', 'artist:piro', 'artist:stealyy', 'artist:futaba yae', 'artist:satotuki tiyo', 'artist:sanjuurou', 'artist:manno', 'artist:dobato', 'artist:momoya show-neko', 'artist:bonnie', 'artist:gomu', 'artist:konshin', 'artist:muraimura', 'artist:rokkaku yasosuke', 'artist:maumen', 'artist:tokinobutt', 'artist:amekosame', 'artist:kanmuri', 'artist:makuwauni', 'artist:chipa', 'artist:couch potato', 'artist:hachigo', 'artist:aki', 'artist:chouzetsu bishoujo mine', 'artist:homura subaru', 'artist:anzuame', 'artist:ment', 'artist:izure', 'artist:gsus', 'artist:kujou danbo', 'artist:akutagawa manbou', 'artist:nakamura rohane', 'artist:tamano kedama', 'artist:interstellar', 'artist:ohara tometa', 'artist:midoriha mint', 'artist:shinobu tanei', 'artist:3e', 'artist:monchan rev3', 'artist:matsuka', 'artist:saotome mokono', 'artist:deadflow', 'artist:kurisu', 'artist:tousaki shiina', 'artist:nakajima yuka', 'artist:mizone', 'artist:ruruepa', 'artist:itaba hiroshi', 'artist:toumi haruka', 'artist:fuurai', 'artist:regdic', 'artist:jagi iwa', 'artist:tohgarashi hideyu', 'artist:hiura r', 'artist:pinakes', 'artist:kuguri oimo', 'artist:jashin bakunyuu swordsman', 'artist:peke', 'artist:kawai', 'artist:nise', 'artist:ame arare', 'artist:miyako', 'artist:minakami mizuya', 'artist:rurukichi', 'artist:inoue yoshihisa', 'artist:shiba kumiko', 'artist:koshino', 'artist:jagayamatarawo', 'artist:aoi masami', 'artist:azuse', 'artist:kase daiki', 'artist:indo curry', 'artist:koume keito', 'artist:sakula', 'artist:okayu', 'artist:oumikun', 'artist:shioroku', 'artist:solopipb', 'artist:rougetu', 'artist:eno', 'artist:itou nanami', 'artist:sekine hajime', 'artist:strong bana', 'artist:uran', 'artist:suga hideo', 'artist:gesundheit', 'artist:pastachin', 'artist:cucchiore', 'artist:momio', 'artist:hoshii nasake', 'artist:mikemono yuu', 'artist:yoshitora', 'artist:samerupa', 'artist:michiking', 'artist:orihi chihiro', 'artist:cle masahiro', 'artist:damenahito', 'artist:tsuzuri', 'artist:maruwa tarou', 'artist:banssee', 'artist:ankoman', 'artist:karma tatsurou', 'artist:shouji nigou', 'artist:ido', 'artist:saiogauma', 'artist:rouka', 'artist:sekiya asami', 'artist:moo', 'artist:hej', 'artist:ban', 'artist:moyori', 'artist:ushinomiya', 'artist:tsukudani norio', 'artist:sage joh', 'artist:murasakio', 'artist:tksn', 'artist:kirisaki byakko', 'artist:kise itsuki', 'artist:yukino minato', 'artist:shouji ayumu', 'artist:iso nogi', 'artist:minase syu', 'artist:betty', 'artist:sayika', 'artist:orico', 'artist:kannazuki motofumi', 'artist:vanilla', 'artist:sanku', 'artist:yasakani an', 'artist:hiru okita', 'artist:match', 'artist:kazabuki poni', 'artist:more', 'artist:wa', 'artist:narumi yuu', 'artist:eretto', 'artist:nectar', 'artist:kirishima satoshi', 'artist:kamelie', 'artist:aihara shouta', 'artist:suisui', 'artist:rakujin', 'artist:yua', 'artist:yappen', 'artist:kawaraya', 'artist:tanno ran', 'artist:b-ginga', 'artist:mashu', 'artist:ushiro muki', 'artist:hakaba', 'artist:hoshina meito', 'artist:fujisaka kuuki', 'artist:fue', 'artist:gokubuto mayuge', 'artist:aki99', 'artist:nora higuma', 'artist:arakure', 'artist:poruno ibuki', 'artist:yagicom', 'artist:tea slash pot', 'artist:akagi asahito', 'artist:dytm', 'artist:gouta', 'artist:shinozuka george', 'artist:shirabe shiki', 'artist:noah', 'artist:ter', 'artist:fukurokouji', 'artist:osterei', 'artist:nohito', 'artist:meme50', 'artist:shaian', 'artist:yamada no seikatu ga daiichi', 'artist:shishikura sendou', 'artist:krohudeanna', 'artist:kikurage', 'artist:minase tamaki', 'artist:suzuki kyoutarou', 'artist:hotei kazuha', 'artist:nagareboshi', 'artist:ohayou-san', 'artist:murakami suigun', 'artist:supurai', 'artist:hanini', 'artist:doemutan', 'artist:yoshika', 'artist:kirimia', 'artist:shinima', 'artist:jake', 'artist:hal', 'artist:amedamacon', 'artist:eonsang', 'artist:shichoson', 'artist:blue gk', 'artist:oni-noboru', 'artist:hizuki akira', 'artist:aiue oka', 'artist:waero', 'artist:yutakame', 'artist:ichinomiya yuu', 'artist:andou shuki', 'artist:kichirock', 'artist:sabaku', 'artist:ryoumoto hatsumi', 'artist:chirorian', 'artist:aoi manabu', 'artist:kiyomiya ryo', 'artist:yanyo', 'artist:arino hiroshi', 'artist:atte nanakusa', 'artist:urute', 'artist:houkisei', 'artist:sorairo len', 'artist:seto yuuki', 'artist:kuno touya', 'artist:negom', 'artist:doumou', 'artist:ishikawa naoya', 'artist:someoka yusura', 'artist:hashibiro kou', 'artist:outou chieri', 'artist:wasabi', 'artist:kaenuco', 'artist:kisaragi nana', 'artist:inoue takuya', 'artist:toyoman', 'artist:danimaru', 'artist:yamizawa', 'artist:terasu mc', 'artist:tomomimi shimon', 'artist:anza yuu', 'artist:osisio', 'artist:yasuyuki', 'artist:sasamashin', 'artist:kasukabe taro', 'artist:hisagi', 'artist:take', 'artist:tsuneyoshi', 'artist:oreo', 'artist:nasipasuta', 'artist:yanje', 'artist:gyouza teishoku', 'artist:rico', 'artist:kinkymation', 'artist:yahiro pochi', 'artist:j.c.pandam', 'artist:kujiran', 'artist:kyougoku touya', 'artist:izumiya otoha', 'artist:mutsuki', 'artist:monaim', 'artist:terazip', 'artist:takayaki', 'artist:ariko youichi', 'artist:chimple hotter', 'artist:akagi rio', 'artist:mikuni mizuki', 'artist:windart', 'artist:yuizaki kazuya', 'artist:murasaki', 'artist:cobo', 'artist:nanamiya tsugumi', 'artist:wantan meo', 'artist:momi', 'artist:yamamoto tomomitsu', 'artist:heizo', 'artist:aritsuno', 'artist:makari tohru', 'artist:kumatora', 'artist:kamioka chirol', 'artist:maka fushigi', 'artist:kurikara', 'artist:momosawa', 'artist:sahara gensei', 'artist:inago', 'artist:rama', 'artist:kirihara you', 'artist:hiyoshi hana', 'artist:ushino kandume', 'artist:maki', 'artist:aikawa ryou', 'artist:kawakami rokkaku', 'artist:kojima saya', 'artist:tsukitokage', 'artist:mori airi', 'artist:airandou', 'artist:asahina yoshitosi', 'artist:onamaru', 'artist:shibasaki syouzi', 'artist:napo', 'artist:takayuki hiyori', 'artist:wakura', 'artist:uchi-uchi keyaki', 'artist:kino', 'artist:peniken', 'artist:puuakachan', 'artist:kinomiki', 'artist:mokufu', 'artist:yanagi', 'artist:dhibi', 'artist:saemon', 'artist:mokyu', 'artist:kimimaru', 'artist:vycma', 'artist:geko', 'artist:ababari', 'artist:miyasaka naco', 'artist:tetora', 'artist:milkshake', 'artist:gyuunyuu nomio', 'artist:tokorot', 'artist:super zombie', 'artist:peko', 'artist:pony r', 'artist:ma-sa', 'artist:ratatatat74', 'artist:natsuki yuu', 'artist:clearite', 'artist:dancyo', 'artist:takemura sesshu', 'artist:hiiragi popura', 'artist:e-musu aki', 'artist:minato fumi', 'artist:harigane shinshi', 'artist:ramanda', 'artist:midori aoi', 'artist:yuzuka', 'artist:pan koojo', 'artist:mitsuashi', 'artist:cure slum', 'artist:muk', 'artist:key', 'artist:kaneta', 'artist:nanaroba hana', 'artist:tel', 'artist:ootori mahiro', 'artist:kurona', 'artist:fujisaki hikari', 'artist:kanbe', 'artist:rayze', 'artist:shokushu-san', 'artist:maya gorou', 'artist:eroi-roe', 'artist:haitokukan', 'artist:komone ushio', 'artist:manatsu roco', 'artist:minakami rinka', 'artist:trista', 'artist:shono kotaro', 'artist:shindou', 'artist:kamiya zuzu', 'artist:mutsumi masato', 'artist:okumoto yuuta', 'artist:kanju', 'artist:piyopiyo', 'artist:kamotama', 'artist:sasachinn', 'artist:musha sabu', 'artist:kaishaku', 'artist:aburidashi zakuro', 'artist:momokumo', 'artist:yukihoshi kokoro', 'artist:hazuki', 'artist:mimi mimizu', 'artist:takaman', 'artist:kataokasan', 'artist:horitomo', 'artist:chirol', 'artist:takano saku', 'artist:kiira', 'artist:miya9', 'artist:yamaya oowemon', 'artist:yaemugura', 'artist:gujira', 'artist:nodame', 'artist:been', 'artist:shimanto shisakugata', 'artist:daki makura', 'artist:tohyama eight', 'artist:enu', 'artist:tonari', 'artist:takeakigaku', 'artist:yuuki shin', 'artist:sousouman', 'artist:himura kiseki', 'artist:nanahara fuyuki', 'artist:yamada yuuya', 'artist:rca', 'artist:houhokekiyo', 'artist:mishima hiroji', 'artist:yukyu ponzu', 'artist:fizz', 'artist:miyamoto liz', 'artist:homu', 'artist:fujimaru', 'artist:kaisen chuui', 'artist:ifuji shinsen', 'artist:ohnaka ito', 'artist:hattori mitsuka', 'artist:8000', 'artist:ikura nagisa', 'artist:migihaji', 'artist:koga nozomu', 'artist:nagayori', 'artist:tetsuyama kaya', 'artist:sugarbt', 'artist:takeshima eku', 'artist:nanase meruchi', 'artist:longbow flintlock', 'artist:tooya daisuke', 'artist:eightman', 'artist:108 gou', 'artist:hira hira', 'artist:untue', 'artist:ayane', 'artist:nogiwa kaede', 'artist:serei teru', 'artist:anmi', 'artist:xeph', 'artist:kaiduka', 'artist:ayagi daifuku', 'artist:2no.', 'artist:fukase ayaka', 'artist:tsuizi', 'artist:sarfata', 'artist:pastime774', 'artist:shennai misha', 'artist:nyuu', 'artist:fujima takuya', 'artist:nekoi mie', 'artist:ogino satoshi', 'artist:honryo hanaru', 'artist:takanashi rei', 'artist:doji ro', 'artist:kazepana', 'artist:takanae kyourin', 'artist:rinaka moruchi', 'artist:itose ikuto', 'artist:3104', 'artist:asahiru yuu', 'artist:haneru', 'artist:akazawa red', 'artist:shinozuka atsuto', 'artist:hinata yuu', 'artist:alexi laiho', 'artist:kuratsuki tsukiko', 'artist:imizu', 'artist:c16e4', 'artist:shirogane hina', 'artist:noukatu', 'artist:yuto', 'artist:nyu', 'artist:yanagi hareta', 'artist:minagi koh', 'artist:yu', 'artist:kameyoshi ichiko', 'artist:gaou', 'artist:yokoshima nikki', 'artist:nakano sora', 'artist:manarou', 'artist:hayake', 'artist:same manma', 'artist:tamayura banko', 'artist:onapan', 'artist:013', 'artist:amano kazumi', 'artist:utu', 'artist:kobayashi youkoh', 'artist:sorimura youji', 'artist:miyabi', 'artist:tatami', 'artist:pinta', 'artist:hazuki yuto', 'artist:hatori piyoko', 'artist:nanakusa amane', 'artist:aoyama kiiro.', 'artist:simao', 'artist:tomo', 'artist:kuriyuzu kuryuu', 'artist:kumakiti', 'artist:nekomata naomi', 'artist:yukisiro arte', 'artist:badhand', 'artist:m.vv', 'artist:tokiwa midori', 'artist:sukoyaka gyuunyuu', 'artist:kuronomiki', 'artist:mameko', 'artist:hayakawa akari', 'artist:niche', 'artist:kinnotama', 'artist:arumajiki', 'artist:sincos', 'artist:pirason', 'artist:natsuka q-ya', 'artist:ooban yaki', 'artist:syosonn', 'artist:nunnu', 'artist:hitsujibane shinobu', 'artist:homaderi', 'artist:toriburi', 'artist:oobayashi mori', 'artist:sekai ichii', 'artist:henreader', 'artist:ekakibit', 'artist:kirii nao', 'artist:pochi.', 'artist:hirno', 'artist:uguisu kagura', 'artist:yukibuster z', 'artist:senyuu', 'artist:umihotaru harumare', 'artist:oshino', 'artist:itsuki kuro', 'artist:kousuke', 'artist:shinooka homare', 'artist:zeroshiki kouichi', 'artist:hamaburicchi', 'artist:yamagara tasuku', 'artist:ginyou haru', 'artist:yukisaki miale', 'artist:onigirikun', 'artist:mameroku', 'artist:ben', 'artist:suruga rinu', 'artist:uenosuke', 'artist:anma', 'artist:nukui lususu', 'artist:poyeop', 'artist:kanyapyi', 'artist:koromotake', 'artist:nuezou', 'artist:uno ryoku', 'artist:binsen', 'artist:karube guri', 'artist:tsukinami kousuke', 'artist:batsuma', 'artist:ugatsu matsuki', 'artist:nishihata kei', 'artist:yukiguni yuu', 'artist:arikawa satoru', 'artist:tsumetoro', 'artist:nanigawa rui', 'artist:suzuki toto', 'artist:subachi', 'artist:suzui narumi', 'artist:mori marimo', 'artist:urashima yuuhi', 'artist:tsurui', 'artist:chicke iii', 'artist:miyahara ayumu', 'artist:inukami inoji', 'artist:mameojitan', 'artist:hanahanamaki', 'artist:takepen', 'artist:mizoguchi keiji', 'artist:yahiro', 'artist:mizuhara yuu', 'artist:etori yuuya', 'artist:kekocha', 'artist:k0ng', 'artist:tsuki no senninno', 'artist:hashina tamaki', 'artist:tanaka decilitre', 'artist:amagasa ikuta', 'artist:mutou mato', 'artist:okara', 'artist:mikami cannon', 'artist:lefthand', 'artist:akitsuki itsuki', 'artist:crowe', 'artist:yuzuki', 'artist:chiyingzai', 'artist:tamabi', 'artist:yozo', 'artist:fan no hitori', 'artist:teri terio', 'artist:mushi', 'artist:take calcium', 'artist:kaedeko', 'artist:usashiro mani', 'artist:haison', 'artist:hanauna', 'artist:urabi', 'artist:mareo', 'artist:zanka', 'artist:aya shachou', 'artist:alber', 'artist:gibuchoko', 'artist:shijou mako', 'artist:shigunyan', 'artist:fuyuno mikan', 'artist:oda non', 'artist:hide448', 'artist:cuvie', 'artist:sakura akami', 'artist:mintice', 'artist:panchira steak', 'artist:totoyama keiji', 'artist:mirino', 'artist:vanadium', 'artist:masuda miyaka', 'artist:masamune shirow', 'artist:hujinon', 'artist:mutou koucha', 'artist:inu', 'artist:kawasaki tadataka', 'artist:miyoshi', 'artist:naruko', 'artist:ogipote', 'artist:mikeou', 'artist:ku-ba', 'artist:naha 78', 'artist:hitotose rin', 'artist:herio', 'artist:kanno takanori', 'artist:mitarashi kousei', 'artist:rojione', 'artist:iwami shouko', 'artist:kotengu', 'artist:karaage3', 'artist:kurihara kenshirou', 'artist:shirasagi rokuwa', 'artist:mozu', 'artist:kabotyausagi', 'artist:yuu', 'artist:akaiguppy', 'artist:shigeta', 'artist:marushin', 'artist:dokuneko noil', 'artist:yiduan', 'artist:asanagi', 'artist:hetaren', 'artist:booch', 'artist:aomushi', 'artist:chimaq', 'artist:sugiyuu', 'artist:100yen locker', 'artist:shikei', 'artist:taketori zaiku', 'artist:kurokawa otogi', 'artist:kani biimu', 'artist:saeki sola', 'artist:mda starou', 'artist:alde hyde', 'artist:yuma', 'artist:kouji', 'artist:typehatena', 'artist:yamaishi juhachi', 'artist:agetama', 'artist:takashi', 'artist:kamaboko', 'artist:amamitu kousuke', 'artist:kink', 'artist:sakura koharu', 'artist:kinomoto anzu', 'artist:namonashi', 'artist:daiji', 'artist:miniru', 'artist:mankai kaika', 'artist:utsusumi kio', 'artist:mumuy', 'artist:tai0201', 'artist:ichitaka', 'artist:hiroshiki', 'artist:siseki hirame', 'artist:ashiomi masato', 'artist:kabocha torte', 'artist:carrot', 'artist:takaharu', 'artist:toraisi666', 'artist:tanaka ahiru', 'artist:akadashi', 'artist:raita', 'artist:syunichi', 'artist:yasumi mirakichi', 'artist:moyamoya', 'artist:naganeko', 'artist:kanimura ebio', 'artist:poncocchan', 'artist:naoto', 'artist:mappa ninatta', 'artist:matsukawa', 'artist:bechu', 'artist:takeyuu', 'artist:jjune', 'artist:isao', 'artist:yuran', 'artist:lena a-7', 'artist:oosawara sadao', 'artist:chiri', 'artist:nanase mizuho', 'artist:kurimoti tiduru', 'artist:kanekiyo miwa', 'artist:toyo', 'artist:mimura zaja', 'artist:ibarame hisa', 'artist:mafuyu', 'artist:yamada konayuki', 'artist:yd', 'artist:akure ekuto', 'artist:okita ababa', 'artist:nekoi hikaru', 'artist:testame', 'artist:hotate-chan', 'artist:gengorou', 'artist:tottotonero tarou.', 'artist:kodama naoko', 'artist:tanabe kyou', 'artist:pan', 'artist:derauea', 'artist:oniharigusa', 'artist:mugichoko', 'artist:sakura yuki', 'artist:taju', 'artist:tachibana omina', 'artist:matashita kintama', 'artist:aizawa hiroshi', 'artist:namaribou nayonayo', 'artist:hirayan', 'artist:kaniya shiku', 'artist:shobu', 'artist:shintarou', 'artist:obiwan', 'artist:shiratama moti', 'artist:muoto', 'artist:sumisuzu', 'artist:zutta', 'artist:mitsuki mantarou', 'artist:soine', 'artist:araki kanao', 'artist:gen', 'artist:toyosaki shu', 'artist:shuko', 'artist:romi', 'artist:halcon', 'artist:aoiro ichigou', 'artist:fujii jun', 'artist:izumi', 'artist:takunomi', 'artist:sumiyao', 'artist:miwa futaba', 'artist:racer', 'artist:ctrlz77', 'artist:soba', 'artist:menea the dog', 'artist:miyazen', 'artist:4why', 'artist:majima shiroyuki', 'artist:quick wiper', 'artist:souji hougu', 'artist:maji', 'artist:signo mandara', 'artist:syukurin', 'artist:bowcan', 'artist:7zu7', 'artist:fuji-han', 'artist:miyamoto issa', 'artist:meito', 'artist:wazakita', 'artist:mikami mika', 'artist:ichiri', 'artist:kirekawa', 'artist:mitsudoue', 'artist:atahuta', 'artist:stlemo', 'artist:leafy', 'artist:wakamatsu', 'artist:miyase mahiro', 'artist:minato yuu', 'artist:miitoban', 'artist:ikuhana niro', 'artist:jakko', 'artist:asaomi shimura', 'artist:iwasaki yuuki', 'artist:tsukuha', 'artist:taishow tanaka', 'artist:grimgrim', 'artist:mitsurugi aoi', 'artist:yamakonbu', 'artist:ringo club', 'artist:morishima kon', 'artist:akatsuki myuuto', 'artist:kizuka kazuki', 'artist:upanishi.', 'artist:asakawa', 'artist:miyasu risa', 'artist:mintaro', 'artist:kurokura eri', 'artist:minato yoshihiro', 'artist:furatsu', 'artist:fujisaka lyric', 'artist:itsutsuse', 'artist:satsuki neko', 'artist:rage', 'artist:futamine kobito', 'artist:tatsuhiko', 'artist:dekochin hammer', 'artist:hitoi'}
        def g_dataFilter(gallery):
            return ("language:chinese" in gallery["tags"]) and (len(filteredArtistList.intersection(gallery["tags"])) > 0)

        return g_dataFilter

    async def autoDownload(self, ttw = 60 * 5):
        g_dataFilter = self.getFilter()
        while not await wait_for_bool(self.stopSignal.wait(), timeout=ttw):
            try:
                galleryList = await self.aioPa.getMainPageGalleryCardInfo("https://exhentai.org/")
                g_dataList = await self.aioPa.fetchG_dataOfficial([[x["gid"], x["token"]] for x in galleryList])
                await self.aioPa.addListDownload(
                    [[g_data["gid"], g_data["token"]]
                        for g_data in [x for x in g_dataList if g_dataFilter(x)]]
                )
            except Exception as e:
                printTrackableException(e)

    def start(self):
        self.loop.create_task(self.autoContinueDownload())
        self.loop.create_task(self.autoDownload())

    def stop(self):
        self.stopSignal.set()
